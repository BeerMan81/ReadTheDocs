

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Layer &mdash; OriginTrail Documentation (Beta) 0.9.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Network structure" href="network-structure.html" />
    <link rel="prev" title="Features" href="features.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> OriginTrail Documentation (Beta)
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Layer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#underlying-technology-and-technical-rationale">Underlying technology and technical rationale</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entities-in-graph-structure-ontology">Entities in graph structure (ontology)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#objects-and-objectclasses">Objects and ObjectClasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#events-and-eventclasses">Events and EventClasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connections">Connections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion-and-future-steps">Conclusion and future steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="network-structure.html">Network structure</a></li>
</ul>
<p class="caption"><span class="caption-text">Node setup:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-setup.html">Node Setup instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallet-setup.html">Wallet Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration-setup.html">Node Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-data.html">Import data</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribution.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Prerequisites:</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#api-purpose">API Purpose:</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#import">Import</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#replication">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#querynetwork">queryNetwork</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#read">Read</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#database">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#querylocal">QueryLocal</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-structure-guidelines.html">Data Structure Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OriginTrail Documentation (Beta)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Layer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/data-layer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-layer">
<span id="id1"></span><h1>Data Layer<a class="headerlink" href="#data-layer" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this document is to explain the data structures of the
OriginTrail protocol data layer. OriginTrail is a purpose built protocol
for trusted supply chain data sharing, utilizing GS1 standards and based
on blockchain.</p>
<p>The following abstractions are based on the observations from several
years of working with supply chain transparency solutions. The aim of
the abstraction is to be generic enough to support any present and
future use cases involving supply chain event visibility and data
exchange, while on the other hand being as tailored as possible to
provide optimal technical performance to support such cases.</p>
<div class="section" id="underlying-technology-and-technical-rationale">
<h2>Underlying technology and technical rationale<a class="headerlink" href="#underlying-technology-and-technical-rationale" title="Permalink to this headline">¶</a></h2>
<p>The OriginTrail Decentralized Network (ODN) Data Layer is intended to
provide data interoperability (between different data providers - i.e.
supply chain stakeholders), as well as easy interconnectivity between
different data sets regardless of their source. This suggests that the
very nature of data structures in play is as much about the information
itself, as it is about the connections between the data provided from
different sources. Network structure consists of incentivised nodes (<a class="reference internal" href="network-structure.html#incentive-model"><span class="std std-ref">Network structure</span></a>).</p>
<p>During the years of building supply chain transparency solutions we have
come to the conclusion that the most adequate data structure is a graph,
where the connections between data points are “first-class citizens” of
the structure. Our previous implementations involved relational
databases which have proven to be suboptimal, finally converging towards
graph logic emulation within the table structures. A native graph
database has shown to be superior in terms of the problems OriginTrail
is tackling.</p>
<p>A graph is ideal to represent the chain of custody on every trackable
element in the supply chain, its properties over time and its
interactions with facilities, transportation devices, companies and
people. The structure of supply chain data in the graphs of the data
layer is subject of this document and is based on GS1 standards, but not
exclusive to other standardization schemes and aims to be standard
inclusive.</p>
<p>It is important to note that these graph abstractions are not dependent
on the specific implementation of the underlying graph database. The
data layer is intended to be “plug-and-play” in this regard, allowing
the choice of the underlying database as long as it can support the
structures and features needed by the data layer. Introducing data to
the Data layer. In this way the system can be extended to support future data formats
and providers.</p>
<p>Once the data gets converted into graph form and stored in the database,
its fingerprint is stored on the blockchain. This process, as well as
the specific details on importer implementations, are out of the scope
of this document, but will be subject of further documentation.</p>
</div>
<div class="section" id="entities-in-graph-structure-ontology">
<h2>Entities in graph structure (ontology)<a class="headerlink" href="#entities-in-graph-structure-ontology" title="Permalink to this headline">¶</a></h2>
<p>There are 5 generic entity groups in the structure of OriginTrail graph
structure.</p>
<ul class="simple">
<li><strong>Objects</strong> and <strong>ObjectClasses</strong>, represented as nodes</li>
<li><strong>Events</strong> and <strong>EventClasses</strong>, represented as nodes</li>
<li><strong>Connections</strong>, represented as edges</li>
</ul>
<p>Each entity can contain</p>
<ol class="arabic simple">
<li>An <strong>identifier</strong> block The identifier block contains a set of IDs
describing the particular entity. Examples would include identifiers
such as GS1 codes (i.e. EAN8, EAN13), QR codes, batch identifiers
(LOT or serial numbers) or any type of internal identifiers used by
the parties in the supply chain. These allow for easy lookups and
traversals. Additionally each graph element has a unique ID generated
deterministically by the system.</li>
<li>A <strong>data</strong> block: The data block contains all non-ID related
information about the entity and is extensible.</li>
<li>A <strong>meta data</strong> block This meta data involves information about the
import process, signing keys and other technical details, not related
to the meta data about supply chain products.</li>
</ol>
<div class="section" id="objects-and-objectclasses">
<h3>Objects and ObjectClasses<a class="headerlink" href="#objects-and-objectclasses" title="Permalink to this headline">¶</a></h3>
<p>Objects represent all physical or digital entities involved in events in
the supply chain. Examples of objects are vehicles, production
facilities, documents, sensors, personnel etc. ObjectClasses
specifically define a global set of properties for their child Objects
(as their “instances”). In the example of a wine authenticity use case,
the data shared among supply chain entities (winery, distributors,
retailers etc) involves information about specific batches of bottles
with unique characteristics. The master data about a product would
present an ObjectClass node in the OT graph, while the specifics about
the product batch would be contained within the “batch” Object. This
allows for a hierarchical organization of objects, with a simplistic but
robust class-like inheritance.</p>
<p>ObjectClasses are divided in:</p>
<ul class="simple">
<li><strong>Actors</strong>, which encompass companies, people, machines and any other
entity that can act or observe objects within the supply chain. (the
“Who”)</li>
<li><strong>Products</strong> (supply chain objects of interest), which represent
goods or services that are acted upon by actors (the “What”)</li>
<li><strong>Locations</strong>, which define either physical or digital locations of
products or actors (the “Where”)</li>
</ul>
<p>Each of the Objects can then be further explained by custom defined
subcategories.</p>
</div>
<div class="section" id="events-and-eventclasses">
<h3>Events and EventClasses<a class="headerlink" href="#events-and-eventclasses" title="Permalink to this headline">¶</a></h3>
<p>Events in the graph structure have a similar inheritance pattern –
EventClasses classify types of events which are instantiated as
particular Event nodes. OriginTrail currently classifies 4 different
event types:</p>
<ul class="simple">
<li><strong>Transport</strong> events, which explain the physical or digital
relocation of objects in the supply chain.</li>
<li><strong>Transformation</strong> events, which contain information about the
transformation of one or more objects into (a new) one. An example
would be the case of an electronic device (i.e. mobile phone), where
the assembly is observed as a transformation event of combining
different components – Objects - into one output Object, or the case
of combining a set of SKUs in one group entity such as a
transportation pallet. Similarly, a digital transformation event
would be any type of processing of a digital product (i.e. mastering
of a digital sound recording). This event type corresponds to GS1
AggregationEvents and TransformationEvents.</li>
<li><strong>Observation</strong> events, which entail any type of observational
activity such as temperature tracking via sensors or laboratory
tests. This event corresponds to GS1 ObjectEvents that are published
by one party (interaction between different business entities is not
the primary focus of the event).</li>
<li><strong>Ownership/custody transfer</strong> events, where the change of ownership
or custody of Objects is distinctly explained. An example would be a
sale event.</li>
</ul>
<p>Each of the events can then be further explained by custom defined
subcategories and meta data.</p>
</div>
<div class="section" id="connections">
<h3>Connections<a class="headerlink" href="#connections" title="Permalink to this headline">¶</a></h3>
<p>The connections are edges in the graph used to define connections
between Objects, ObjectClasses and Events. The connections are
classified in 3 groups:</p>
<ul class="simple">
<li><strong>Inheritance</strong> connections (between ObjectClass and Object vertices,
as well as between EventClass and Event vertices). These connections
define that an Object is an instance of ObjectClass, the isInstanceOf
edge.</li>
<li><strong>Involvement</strong> connections (between Object and Event vertices)
connect objects with events in which they are involved. For example,
a transformation event of production would have input objects, output
objects, a location where the production took place etc.</li>
<li><strong>State</strong> connections (between two Object vertices) connect two or
more objects that are related in some way. For example, an object can
be owned by some supply chain actor.</li>
</ul>
<p>An example of a graph illustrating all the above mentioned entities is
provided below. It illustrates a simplified scenario of a movement of an
“engine” object within a supply chain, undergoing a transformation event
of wrapping it up in a “package” by Employee Bob from CarEngines LTD,
which is transported by an “AirTransport” company and finally sold to
“Buyer Alice Corp”.</p>
<p><img alt="Graph Example" src="http://pulsing-ks.com/tmp/graph-example.png" /></p>
<p>This very simple example easily illustrates the amount of data
connections needed to efficiently explain the undergoing scenario and is
simplified to provide an easier logical overview.</p>
</div>
</div>
<div class="section" id="conclusion-and-future-steps">
<h2>Conclusion and future steps<a class="headerlink" href="#conclusion-and-future-steps" title="Permalink to this headline">¶</a></h2>
<p>This document outlines the data structure logic behind OriginTrail’s
data layer with the intention of providing high flexibility and data
interoperability within the network. It is a work in progress and
therefore we invite the community to join and provide ideas and feedback
on possible improvements and inefficiencies that may arise from such a
scheme. The best way to contribute is to use the Improvement Proposals
repository provided by the OriginTrail team. Further iterations on the
structure will be based on use-cases implemented and observed in the
alpha and test net focusing on optimizations and simplifications of the
structure.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="network-structure.html" class="btn btn-neutral float-right" title="Network structure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="features.html" class="btn btn-neutral" title="Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, OriginTrail.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.9.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>